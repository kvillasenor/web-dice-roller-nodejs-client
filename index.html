<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Dice Roller</title>

	<style>
		/*CSS from previous Dice Roller assignment*/
		body {
			text-align: center;
			padding: 20px;

		}

		.container {
			background-color: rgba(255, 255, 255, 0.9);
			padding: 30px;
			border-radius: 10px;
			width: 500px;
			margin: auto;
			box-shadow: 0px 4px 10px rgba(0,0,0,0.1);
		}

		h1 {
			margin-bottom: 10px;
		}

		/* makes the table stretch evenly */
		table {
			width: 100%;
			margin-bottom: 20px;
		}

		th {
			padding: 5px;
		}

		/*styles the dice number fields. Numbers are right justified.*/
		input {
			width: 60px;
			padding: 8px;
			text-align: right;
			font-size: 18px;
		}

		/*styling the button and making the cursor turn into a pointer cursor*/
		button {
			padding: 10px 20px;
			font-size: 16px;
			background-color: #d40000;
			color: white;
			border-radius: 5px;
			cursor: pointer;
		}

		/*makes it so that when you hover over the button is changes color and let's you know*/
		button:hover {
			background-color: #800404;
		}
    </style>

</head>
<body>
	<!--HTML from previous Dice Roller assignment -->
	<div class="container">
        <h1>Web Dice Roller for Yahtzee</h1>

        <p class="instructions">
            This Web Dice Roller will be simulating rolling five 6-sided dice for a Yahtzee game. To roll the dice for 
			the game, click the “Roll” button or press “Enter”.

        </p>

        <!--A table is used to organize the results of each die. tr = row, th = header name, td = data-->
        <table>
            <tr>
                <th>Die 1</th>
                <th>Die 2</th>
                <th>Die 3</th>
                <th>Die 4</th>
                <th>Die 5</th>

            </tr>

            <tr>
                <!--input displays the dice number and readonly makes it so that users are not able to edit. This is 
                done like this so that JavaScript can later contorl this-->

                <td><input type="text" id="die1" readonly></td>
                <td><input type="text" id="die2" readonly></td>
                <td><input type="text" id="die3" readonly></td>
                <td><input type="text" id="die4" readonly></td>
                <td><input type="text" id="die5" readonly></td>

            </tr>

        </table>

        <!--button to roll dice. autofocus makes it so that when the user presses the "Enter" key the dice will also 
        roll-->
        <button onclick="rollDice()" autofocus>
            Roll
        </button>
    </div>

	<script>
		//Javascript for the new Dice Roller to call information from the server

		// Link to the Azure Node.js server URL to call the API
        const SERVER_URL = "https://web-dice-roller-nodejs-server.azurewebsites.net/";

        // The wake up function so the server starts when the page loads
        window.onload = async function() {
            try {
                await fetch(SERVER_URL + "/api/ping");
                console.log("Server wake-up call sent.");
            } catch (error) {
                console.log("Wake-up failed:", error);
            }
        };

        //Roll all 5 dice by calling the server API /random-num
        async function rollDice() {
            try {
				//looping through all 5 dice
                for (let i = 1; i <= 5; i++) {
                    const response = await fetch(SERVER_URL + "/random-num");
                    const data = await response.json();
				//updates with the number generated
                    document.getElementById("die" + i).value = data.dice;
                }
            } catch (error) {
                console.error("Error fetching dice values:", error);
                for (let i = 1; i <= 5; i++) {
                    document.getElementById("die" + i).value = "Err";
                }
            }
        }
    </script>	
</body>

</html>
